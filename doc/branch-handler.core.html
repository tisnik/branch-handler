<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>branch-handler.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Branch-handler 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>branch-handler</span></div></div></li><li class="depth-2 current"><a href="branch-handler.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="branch-handler.core.html#var--main"><div class="inner"><span>-main</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-action-consumer"><div class="inner"><span>action-consumer</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-actions-queue"><div class="inner"><span>actions-queue</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-api-call-handler"><div class="inner"><span>api-call-handler</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-branch-job-prefix"><div class="inner"><span>branch-job-prefix</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-clone-mirror-repo"><div class="inner"><span>clone-mirror-repo</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-clone-or-fetch-mirror-repo"><div class="inner"><span>clone-or-fetch-mirror-repo</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-create-action-queue"><div class="inner"><span>create-action-queue</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-create-or-delete-jenkins-job"><div class="inner"><span>create-or-delete-jenkins-job</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-create-workdir"><div class="inner"><span>create-workdir</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-empty-SHA"><div class="inner"><span>empty-SHA</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-fetch-mirror-repo"><div class="inner"><span>fetch-mirror-repo</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-filter-branch-jobs"><div class="inner"><span>filter-branch-jobs</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-get-branch"><div class="inner"><span>get-branch</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-get-operation"><div class="inner"><span>get-operation</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-http-request-handler"><div class="inner"><span>http-request-handler</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-jenkins-url"><div class="inner"><span>jenkins-url</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-job-list-command"><div class="inner"><span>job-list-command</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-log-request"><div class="inner"><span>log-request</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-new-action"><div class="inner"><span>new-action</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-parse-gitlab-info"><div class="inner"><span>parse-gitlab-info</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-parse-job-name"><div class="inner"><span>parse-job-name</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-parse-job-names"><div class="inner"><span>parse-job-names</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-port"><div class="inner"><span>port</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-read-branch-list-from-repo"><div class="inner"><span>read-branch-list-from-repo</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-read-jobs-for-branches"><div class="inner"><span>read-jobs-for-branches</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-read-request-body"><div class="inner"><span>read-request-body</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-repo-workdir"><div class="inner"><span>repo-workdir</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-repodir-exists.3F"><div class="inner"><span>repodir-exists?</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-ring-app"><div class="inner"><span>ring-app</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-send-response"><div class="inner"><span>send-response</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-start-action-consumer"><div class="inner"><span>start-action-consumer</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-start-jenkins-jobs"><div class="inner"><span>start-jenkins-jobs</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-start-server"><div class="inner"><span>start-server</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-verbose"><div class="inner"><span>verbose</span></div></a></li><li class="depth-1"><a href="branch-handler.core.html#var-workdir"><div class="inner"><span>workdir</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">branch-handler.core</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var--main"><h3>-main</h3><div class="usage"><code>(-main &amp; args)</code></div><div class="doc"><pre class="plaintext">Entry point to the branch handler service server.
</pre></div></div><div class="public anchor" id="var-action-consumer"><h3>action-consumer</h3><div class="usage"><code>(action-consumer actions-queue)</code></div><div class="doc"><pre class="plaintext">Consumer that process messages dequed from action queue.
</pre></div></div><div class="public anchor" id="var-actions-queue"><h3>actions-queue</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Queue to plan actions that will need to be performed.
</pre></div></div><div class="public anchor" id="var-api-call-handler"><h3>api-call-handler</h3><div class="usage"><code>(api-call-handler request)</code></div><div class="doc"><pre class="plaintext">Handler for all API calls.
</pre></div></div><div class="public anchor" id="var-branch-job-prefix"><h3>branch-job-prefix</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Prefix used for all &apos;branch&apos; build jobs.
</pre></div></div><div class="public anchor" id="var-clone-mirror-repo"><h3>clone-mirror-repo</h3><div class="usage"><code>(clone-mirror-repo workdir group reponame repository-url)</code></div><div class="doc"><pre class="plaintext">Clone content of selected repository.
</pre></div></div><div class="public anchor" id="var-clone-or-fetch-mirror-repo"><h3>clone-or-fetch-mirror-repo</h3><div class="usage"><code>(clone-or-fetch-mirror-repo action)</code></div><div class="doc"><pre class="plaintext">Clone the repository or fetch data if directory with clone already exist.
</pre></div></div><div class="public anchor" id="var-create-action-queue"><h3>create-action-queue</h3><div class="usage"><code>(create-action-queue)</code></div><div class="doc"><pre class="plaintext">Construct queue to store all actions that needs to be performed.
</pre></div></div><div class="public anchor" id="var-create-or-delete-jenkins-job"><h3>create-or-delete-jenkins-job</h3><div class="usage"><code>(create-or-delete-jenkins-job jenkins-url job-list-command branch-job-prefix action)</code></div><div class="doc"><pre class="plaintext">Create or delete Jenkins job according to selected action.
</pre></div></div><div class="public anchor" id="var-create-workdir"><h3>create-workdir</h3><div class="usage"><code>(create-workdir workdir)</code></div><div class="doc"><pre class="plaintext">Create new working directory.
</pre></div></div><div class="public anchor" id="var-empty-SHA"><h3>empty-SHA</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Default SHA used to detect operation that needs to be performed.
</pre></div></div><div class="public anchor" id="var-fetch-mirror-repo"><h3>fetch-mirror-repo</h3><div class="usage"><code>(fetch-mirror-repo workdir group reponame repository-url)</code></div><div class="doc"><pre class="plaintext">Fetch the content of selected repository.
</pre></div></div><div class="public anchor" id="var-filter-branch-jobs"><h3>filter-branch-jobs</h3><div class="usage"><code>(filter-branch-jobs all-jobs prefix)</code></div><div class="doc"><pre class="plaintext">Filter jobs according to given prefix in job name.
</pre></div></div><div class="public anchor" id="var-get-branch"><h3>get-branch</h3><div class="usage"><code>(get-branch git-ref)</code></div><div class="doc"><pre class="plaintext">Retrieve branch name for given Git reference.
</pre></div></div><div class="public anchor" id="var-get-operation"><h3>get-operation</h3><div class="usage"><code>(get-operation before after)</code></div><div class="doc"><pre class="plaintext">Get the next operation that needs to be planned.
</pre></div></div><div class="public anchor" id="var-http-request-handler"><h3>http-request-handler</h3><div class="usage"><code>(http-request-handler request)</code></div><div class="doc"><pre class="plaintext">Handler that is called by Ring for all requests received from user(s).
</pre></div></div><div class="public anchor" id="var-jenkins-url"><h3>jenkins-url</h3><div class="usage"></div><div class="doc"><pre class="plaintext">URL to Jenkins server.
</pre></div></div><div class="public anchor" id="var-job-list-command"><h3>job-list-command</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Command used to retrieve job list from Jenkins.
</pre></div></div><div class="public anchor" id="var-log-request"><h3>log-request</h3><div class="usage"><code>(log-request request)</code></div><div class="doc"><pre class="plaintext">Record an event about request into log.
</pre></div></div><div class="public anchor" id="var-new-action"><h3>new-action</h3><div class="usage"><code>(new-action actions-queue action)</code></div><div class="doc"><pre class="plaintext">Plan for a new action via action queue.
</pre></div></div><div class="public anchor" id="var-parse-gitlab-info"><h3>parse-gitlab-info</h3><div class="usage"><code>(parse-gitlab-info request)</code></div><div class="doc"><pre class="plaintext">Parse payload sent from GitLab in response body.
</pre></div></div><div class="public anchor" id="var-parse-job-name"><h3>parse-job-name</h3><div class="usage"><code>(parse-job-name branch-job-prefix job-name)</code></div><div class="doc"><pre class="plaintext">Parse the job name, try to get group, repository, and branch from it.
</pre></div></div><div class="public anchor" id="var-parse-job-names"><h3>parse-job-names</h3><div class="usage"><code>(parse-job-names branch-job-prefix job-names)</code></div><div class="doc"><pre class="plaintext">Parse all job names, try to get group, repository, and branch from them.
</pre></div></div><div class="public anchor" id="var-port"><h3>port</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Default port for the service.
</pre></div></div><div class="public anchor" id="var-read-branch-list-from-repo"><h3>read-branch-list-from-repo</h3><div class="usage"><code>(read-branch-list-from-repo workdir group reponame)</code></div><div class="doc"><pre class="plaintext">Read list of all branches from selected repository.
</pre></div></div><div class="public anchor" id="var-read-jobs-for-branches"><h3>read-jobs-for-branches</h3><div class="usage"><code>(read-jobs-for-branches jenkins-url job-list-command branch-job-prefix)</code></div><div class="doc"><pre class="plaintext">Read list of all jobs having specified prefix in job name.
</pre></div></div><div class="public anchor" id="var-read-request-body"><h3>read-request-body</h3><div class="usage"><code>(read-request-body request)</code></div><div class="doc"><pre class="plaintext">Read all informations from the request body.
</pre></div></div><div class="public anchor" id="var-repo-workdir"><h3>repo-workdir</h3><div class="usage"><code>(repo-workdir workdir group reponame)</code></div><div class="doc"><pre class="plaintext">Construct name of work directory for given group and repository name.
</pre></div></div><div class="public anchor" id="var-repodir-exists.3F"><h3>repodir-exists?</h3><div class="usage"><code>(repodir-exists? workdir group reponame)</code></div><div class="doc"><pre class="plaintext">Check if directory exist for given group and repository name.
</pre></div></div><div class="public anchor" id="var-ring-app"><h3>ring-app</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Definition of a Ring-based application behaviour.
</pre></div></div><div class="public anchor" id="var-send-response"><h3>send-response</h3><div class="usage"><code>(send-response response-text)</code></div><div class="doc"><pre class="plaintext">Send response in HTML format to client.
</pre></div></div><div class="public anchor" id="var-start-action-consumer"><h3>start-action-consumer</h3><div class="usage"><code>(start-action-consumer actions-queue)</code></div><div class="doc"><pre class="plaintext">Start consumer of action queue in its own thread.
</pre></div></div><div class="public anchor" id="var-start-jenkins-jobs"><h3>start-jenkins-jobs</h3><div class="usage"><code>(start-jenkins-jobs jenkins-url action)</code></div><div class="doc"><pre class="plaintext">Call Jenkins to start selected job.
</pre></div></div><div class="public anchor" id="var-start-server"><h3>start-server</h3><div class="usage"><code>(start-server ring-app port)</code></div><div class="doc"><pre class="plaintext">Start the service on regular machine.
</pre></div></div><div class="public anchor" id="var-verbose"><h3>verbose</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Flag to enable or disable verbosity level.
</pre></div></div><div class="public anchor" id="var-workdir"><h3>workdir</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Working directory.
</pre></div></div></div></body></html>